<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
<body>

     <div class="container">

         <h1 class="text-center">Student Details</h1>
         <input type="text" class="form-control my-4 w-25" placeholder="Search Student" id="studentname">
         <button class="btn btn-primary my-4" id="search">Search</button>
        <table class="table table-dark table-hover">
            <thead>
                <tr>
                    <th>No:</th>
                    <th>Name:</th>
                    <th>Email:</th>
                    <th>Course:</th>
                    <th>Action:</th>
                </tr>
            </thead>
            <tbody id="result">
                
            </tbody>
        </table>
        <a href="index7.html" class="btn btn-danger">Back</a>

    </div>
<script>

    let result=document.getElementById("result")
    let studentlist=JSON.parse(localStorage.getItem("students"))
    document.getElementById("search").addEventListener("click",function(){

        let studentname=document.getElementById("studentname").value
        let findstudent=studentlist.filter((data)=>{
            return data.name==studentname
        })      
        findstudent.forEach((data,idx)=>{
            result.innerHTML=""
            result.innerHTML+=`<tr>
                            <td>${idx+1}</td>                
                            <td>${data.name}</td>                
                            <td>${data.email}</td>                
                            <td>${data.course}</td>                
                            <td><button class="btn btn-danger">Delete</button></td>                
                </tr>`
        })
   
    })
    function deleteUser(idx){
        studentlist.splice(idx,1)
        localStorage.setItem("students",JSON.stringify(studentlist))
        displaystudents()
    }
    function editUser(idx){
       let editid=localStorage.setItem("editid",JSON.stringify(idx))
       window.location="./index7.html"
    }
    function displaystudents(){
        result.innerHTML=""
        studentlist.forEach((data,idx) => {
            result.innerHTML += `<tr>
                    <td>${idx+1}</td>
                    <td>${data.name}</td>
                    <td>${data.email}</td>
                    <td>${data.course}</td>
                    <td><button class="btn btn-danger" onclick="deleteUser(${idx})">Delete</button>
                        <button class="btn btn-warning" onclick="editUser(${idx})">Edit</button></td>
                </tr>
                `
        });
    }
    document.addEventListener("DOMContentLoaded",function(){
        displaystudents()
        localStorage.removeItem("editid")
    })
</script>

    
</body>
</html>